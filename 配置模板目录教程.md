# 配置模板目录教程

## 🔍 问题原因

系统默认的模板目录是 `D:\work\OCR\Template`，如果你遇到模板无法显示的问题，可能是因为：

1. 目录不存在
2. 目录路径错误
3. 目录中没有图片文件
4. 权限问题

## 🛠️ 解决方案

### 方法1: 使用示例模板（推荐）

我已经为你生成了6个示例模板，位于 `templates_sample/` 目录下。

#### Windows系统
```bash
# 1. 复制示例模板到 D:\work\OCR\Template
# 2. 或者修改 app.py 使用相对路径
```

#### Linux/macOS系统
```bash
# 1. 修改 app.py 使用绝对路径
# 例如：
TEMPLATE_FOLDER = r"/home/user/stamp_webapp/templates_sample"
```

### 方法2: 修改模板目录路径

编辑 `app.py` 第16行：

```python
# 原始配置（Windows）
TEMPLATE_FOLDER = r"D:\work\OCR\Template"

# 修改为示例目录（相对路径）
TEMPLATE_FOLDER = r"templates_sample"

# 或者使用绝对路径（根据你的系统）
# Windows示例：
TEMPLATE_FOLDER = r"C:\Users\YourName\Documents\stamp_templates"

# Linux/macOS示例：
TEMPLATE_FOLDER = r"/home/user/stamp_templates"

# 网络路径示例：
TEMPLATE_FOLDER = r"\\server\stamp_templates"
```

### 方法3: 创建模板目录

#### Windows系统
```bash
# 1. 创建目录
mkdir D:\work\OCR\Template

# 2. 复制示例模板到该目录
xcopy templates_sample D:\work\OCR\Template /E /I

# 3. 或者手动复制文件
```

#### Linux/macOS系统
```bash
# 1. 创建目录
mkdir -p ~/stamp_templates

# 2. 复制示例模板
cp templates_sample/* ~/stamp_templates/

# 3. 修改 app.py
TEMPLATE_FOLDER = r"/home/user/stamp_templates"
```

### 方法4: 使用当前目录

如果你想让模板目录和程序在同一目录下：

```python
# 在 app.py 中修改
import os

# 使用当前目录下的 templates 文件夹
TEMPLATE_FOLDER = os.path.join(os.path.dirname(__file__), 'templates')

# 或者使用绝对路径
TEMPLATE_FOLDER = os.path.abspath('templates')
```

## 📁 模板文件要求

### 支持的格式
- PNG (.png)
- JPEG (.jpg, .jpeg)
- BMP (.bmp)

### 文件命名
- 使用有意义的文件名，例如：
  - `圆形公章_公司名称.png`
  - `财务专用章_分公司.png`
  - `合同专用章_项目部.png`

### 图片尺寸
- 建议尺寸：200x200 到 500x500 像素
- 文件大小：建议小于 2MB
- 背景：白色或透明背景

## 🎨 模板制作建议

### 标准模板要求
1. **清晰度**: 图片清晰，边缘锐利
2. **颜色**: 红色印章，颜色均匀
3. **背景**: 白色或透明背景
4. **尺寸**: 正方形或圆形
5. **格式**: PNG格式最佳

### 模板分类
建议按以下分类组织：
```
templates/
├── 公司公章/
│   ├── 总公司公章.png
│   ├── 分公司公章.png
│   └── 项目部公章.png
├── 财务专用章/
│   ├── 财务专用章_北京.png
│   └── 财务专用章_上海.png
├── 合同专用章/
│   ├── 合同专用章_采购.png
│   └── 合同专用章_销售.png
└── 其他专用章/
    ├── 发票专用章.png
    └── 质检专用章.png
```

## 🔍 故障排查

### 检查1: 目录是否存在
```python
# 在 app.py 中添加调试代码
print(f"模板目录: {TEMPLATE_FOLDER}")
print(f"目录存在: {os.path.exists(TEMPLATE_FOLDER)}")
```

### 检查2: 文件列表
```python
# 在 app.py 中添加调试代码
import os
print(f"模板文件列表: {os.listdir(TEMPLATE_FOLDER)}")
```

### 检查3: 权限检查
```bash
# Windows
icacls D:\work\OCR\Template

# Linux/macOS
ls -la /path/to/templates
```

### 检查4: 浏览器调试
1. 打开浏览器开发者工具 (F12)
2. 切换到 Network 标签
3. 刷新页面
4. 查看 `/api/templates` 请求
5. 检查响应内容

## 📊 示例模板说明

我已经为你生成了6个示例模板：

1. **圆形公章模板1.png** - 标准圆形公章
2. **椭圆公章模板1.png** - 椭圆形公章
3. **财务专用章模板.png** - 财务专用章
4. **合同专用章模板.png** - 合同专用章
5. **发票专用章模板.png** - 发票专用章
6. **质检专用章模板.png** - 质检专用章

这些模板可以用于测试和学习，实际使用时请替换为你自己的真实印章模板。

## 🚀 快速测试

配置完成后，重启应用：

```bash
# Windows
python app.py

# Linux/macOS
python3 app.py
```

然后访问 http://localhost:5000，在第三步应该能看到模板选择界面了。

## 📞 技术支持

如果还有问题，请检查：

1. ✅ 目录路径是否正确
2. ✅ 目录中是否有图片文件
3. ✅ 文件格式是否支持
4. ✅ 权限是否足够
5. ✅ 浏览器控制台是否有错误信息

---

**配置完成后，模板选择功能应该能正常工作了！** 🎉
